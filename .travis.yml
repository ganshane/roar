sudo: false
cache:
  directories:
  - "$HOME/.m2/repository"
  - "$HOME/protobuf"
before_cache:
- rm -rf $HOME/.m2/repository/com/ganshane/roar
- find $HOME/.m2 -name "resolver-status.properties" | xargs rm
language: java
env:
  global:
  - GPG_DIR="`pwd`/support/deploy"
  - MAVEN_OPTS="-XX:MaxPermSize=128m -Xmx1g -Xms1g"
  - secure: skCMbNG+tj5G3+UHcxMSmpBdAHy7GMy/KhU5cAEYYA/RK7jHRFt67tTtkjnnijcG5c0FEcihax6VJi8jkdSl3jxEmnfxMK71WvrzjbVsH6k18aP+AEsIv6+X2InMlVbyyZbFGLJUTpZjZYnRiBszVr8ddkZpQGahdJ7za8oCwsWpgIbjrVRkM45/2JU2/xKAUHtlxeisrAPDDgODUcxHrRbdTqpj342CPiiNNbLv0qZpT1iW6ANlfIadwEorLb3GLnrz67c+TvdcS+yuMAtFfMbW+GXbFsHIaI/73udui4kJH8QVtFAp3WSzPq6eecuvWSdPm12/LlF45HSyIRshMg3hgxntm8UcLWQtfQU9mOVSIwWa+XBhN45XARCUbw7tbnCirn64bjjSYeOzMTRpalRIIyEry5H+nSNFnRe15Yh7d/B7oaIHPhPfRENsMnlBq39Bh1IviLZbUmYjTJXGBHVuLSkYRfe2Ux2QkMptLTDtL9XU+HcY08nIKN/OmHDhTqFgM8kc1Xk/UorQj2oCPaazc7LR3zBluXRpJ+0gJ1ILUClrZ0Bsl8Ke9Zy89H6LfsMybTc+P3fZ9lvDdv9zrJiqr1Up9NELeQsKqqJddcZZrtLcXWLle5L3qtWTR3Kgl2cdA8uKA34CrJ7QqdjIh1vMgQwzski0etsadXaCApc=
  - secure: Qw/naJWzI8AVW1tyuYxhnBrD4TTf8S+rE9NNimUJbAuFBBSyM0PXKWsOvyGntdqk2UekRX5Roi5NKRjwIaJ2OkXOFZXA96khH0/CNTGu5T3uymYjN0BLd8ZlluIe61WGSlPrzlzoshz9BYHTtEhMKuCQWqBxtB8AGSMdOSxpeXrxXiLUZgxLsjQrtUdu1zwpctrbjw6qSaW3jIRCVWJXOURVp8+WBy7uWD57929jyotcEmeBZuTKCVjCfxkMoHGXNEbZXF31plJWfKvOpgBFEbPLHLKtVHZfakYQ9sqAMwamJY6E6f0v7bABVggSHpHBs7S/PVBNeJffhDEzfKcsgT374CF4WlHf6yzso3mXKuUiS6RB5Aw8HW+zEWjiuhnw23jrnm0rbjSrB5tZV3VPKyxEEUQAJGQinuV5IYjWFn63TkY0niEYfmXUyAnngBBuWvIJDdX/d2qzZjDpepUeYw+9V3P6FUkUaf5ogrPPsjh/mjC/ZyENnxW8MDDbeX/XrX5uExRwad1pbRci6xsf5NzE9DFjiGcFHZG9uGKNa6u3Q5jvDX+2IINC6PFgeUvcwslfKFqE+atr5TjZIJivR+eEzvoZ+IZANU2D8iz1aefo81nAGckMHCm/tnXKMqDS/sH18DcB4p1doA71rqbnpDb4fQwIZcqxyEMdiQh81Gs=
  - secure: FydE886DH9wrdsldflxlsXzaKXPYVMDOEIvsB0gS2WEzRlnY/cxzYb1syzclP4rUjTP9YA5fEIwxa6bcSm7FLDBRyu54MN5zSi8I115MPn1iINYn3R6S5/QZme//CCuDo33zhVekqgfxGfMfb7mQJ52ijDqUbsZT66h0H06tq9QJYYx2i1xaxv1whf+ADEpUNaG/N1IMf5RjD8zGQW843M4fTrYS5gCijKg+znV+PxnRNWTUFWqCW94g0d1dBPRTfKFdS+1pXehPyhTcESZj7EYpV3Fl+xxM8CqDdue2vOBBN7vPNPl+p2wEYzlBQyR6g328BKFdO/MTORgO89JQC8VxrqBBImKWeLnaCR9ku+M3Ge7BIH26Oi4MxXcmrAcTQbJjVJLHQkGBWnBIOljtXkoDJ9npRYt14AVvHHDYlCM13gpCeUVzjV6wNAMqk7KRJayG/6oMIl+5LuiJHOii2JormMUeAbkGTijWeliUHekwDj5or0lqJcfLfH5alYsQR620arEdqJVO1oFmo3gcwGDPCFrPWW7O040xwOdBN9LCxezt+JwYkJGJCTo13m/VS6PNIhOc5dsT6h1CcLXa2M8ad5ndJhU6FQFxJlhzHdcl1JNMNxS3OmTnEPT+B/BOy1JayQG+wH1YJvA8j9HTcf++dDLI1I8Dql8u8EzTIFw=
  - secure: vGIQgtulaWEsJzT7gWhqJcM3NciMTy9aQjG3ZOI3qgy4fEgAON0XnUSPVeviMk0cxIxl68aBgXBM1+sRLJJI+IyfLB/VVEU2u3lzdGSxPM2a77uA84HWfc63tAp3W1oqkHAUgtvxQTiNYzhcKbzKQV33K3+YbDXO3KmMf4woynC0A2R11zHtcSRcxV46dhAZ8eFHLizKSHevfu02b4XeQPBj8pgFy6EKL0zKmur6G9KqL24g8EEowPhrTH1rc0b/OwhDzFIU1JXc+NFmSQ8sp7KPWs//rF2AZ8s/a2WGXNVCPdZEjkPSbRDQSuZs7wYlEzEvu1sA16lqzLKIzbkVl1QVxSZwkB2BwsWR+xhmpc9KgNXtJYLSvtL2wF0w7C3R5bvWRsQXJu6xGBV4/M/IcDSczQlWl9l+7xc2ST1S4zuudNNKCNyvyBpSPGCaUitFp31G0Wa7Tcbk3aruBiqbB/2yRuX0Yef8izPRfPaXuKt7DrCFhCFG7DcnocDEfeSeJFXkgv6tVF3zUh6X4//yRgmytJ4qPRB53Sr2BTksDPg4Dc/IYX0vcAU8ROVCfOedZmRAOtUT1NjI7WQm9yG3T8egkQTTmewhB2wwVJ1fXPks8AgWFeUmX7ian2YdreOWzXAmlZj3h2e54m3Gk1/RqhNjiqFSqjFYI1td2Hqwd3U=
  - secure: AKIX866t8wdrXZOcezM2lviEfowO+UY60Y7Hp216tEP5pSD4quK17tHyieikDRM555X/ssdB3DOFOYcTMMSDhFdnch3ink7KAfv49UmAWw54N8UgRUP2vWgZNSyxNPxMI6eZc7z1MpMj0eOXBG9rs/trJGcQafXkC2uKU1ZbcZmIKPGec4NhwwtSTktwkpJQL7RkQghWI7Lp1DyPsyfw+uSqOu2OwQEAZvj0onHnbpNyt355//q0G0ZM0JubhvHYterAC9PPyhrhFgvB13CTvw1S/ObfvW30yWqrIRvQHwt2Pab9Wwk7QAZcAyMm64FBKA86tvhN4RIlW8JOZ+FeasodEGDCZjbvYRcVRgsj57qYSszbHdHu3SFwFJqZXFxnrtu+TcSC4LprZzniA5H6KJLGl71hOg/N6uaAXSS8O5TYgT1uGJd/Giw+1/NiIzxhNDYcT8D+3frGmXShqM+Ll3axA3n7J7ocNBy3flgifZgTpkjXndD8wiWqYNUQTOKXCt1XF/amnPY3MUwzIMbBcQtxObKPWRh8ZsSV+5d2sH0Uz0QhrNwD2oz0q/z+7M5Qpk3hOVwBILoczhbXyiq4ZQViAVqaFxbW4H/i5L5fYwy0FTp/1ZJUznldvT4vIiv8scw+WJYjh/xMoDYJIAlTOdjqh/GlNMSUw48u29Jm+iI=
before_install:
- bash support/scripts/install-protobuf.sh
- export PATH=$PATH:$HOME/protobuf/bin
jdk:
- oraclejdk7
install: true
script:
- protoc --version
- mvn test
after_success:
- openssl aes-256-cbc -pass pass:$ENCRYPTION_PASSWORD -in $GPG_DIR/pubring.gpg.enc
  -out $GPG_DIR/pubring.gpg -d
- openssl aes-256-cbc -pass pass:$ENCRYPTION_PASSWORD -in $GPG_DIR/secring.gpg.enc
  -out $GPG_DIR/secring.gpg -d
- "$GPG_DIR/publish.sh"
